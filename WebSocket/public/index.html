<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tensosense Dashboard</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
</head>
<body>
    <!-- Pantalla de Login -->
    <div id="loginScreen" class="login-container">
        <div class="login-card">
            <div class="logo-container">
                <div class="logo">
                    <svg viewBox="0 0 100 100" class="logo-icon">
                        <circle cx="50" cy="50" r="45" fill="none" stroke="var(--accent-color)" stroke-width="3"/>
                        <path d="M25,50 Q50,25 75,50 Q50,75 25,50" fill="var(--accent-color)" opacity="0.3"/>
                        <circle cx="50" cy="50" r="8" fill="var(--accent-color)"/>
                        <path d="M35,35 L65,35 M35,50 L65,50 M35,65 L65,65" stroke="var(--accent-color)" stroke-width="2" opacity="0.6"/>
                    </svg>
                </div>
                <h1>Tensosense</h1>
                <p>Dashboard de Monitoreo IoT</p>
            </div>
            
            <form id="loginForm" class="login-form">
                <div class="form-group">
                    <label for="username">Usuario</label>
                    <input type="text" id="username" name="username" required placeholder="Ingresa tu usuario">
                </div>
                
                <div class="form-group">
                    <label for="password">Contrase√±a</label>
                    <input type="password" id="password" name="password" required placeholder="Ingresa tu contrase√±a">
                </div>
                
                <button type="submit" class="login-button">
                    <span class="button-text">Iniciar Sesi√≥n</span>
                    <div class="loading-spinner" style="display: none;"></div>
                </button>
                
                <div id="loginError" class="error-message" style="display: none;"></div>
            </form>
            
            <div class="login-footer">
                <p><strong>Usuarios de prueba:</strong></p>
                <p>admin / password</p>
                <p>tensosense / password</p>
            </div>
        </div>
    </div>

    <!-- Dashboard Principal -->
    <div id="dashboard" class="dashboard" style="display: none;">
        <!-- Header -->
        <header class="dashboard-header">
            <div class="header-left">
                <div class="logo-small">
                    <svg viewBox="0 0 100 100" class="logo-icon-small">
                        <circle cx="50" cy="50" r="45" fill="none" stroke="var(--accent-color)" stroke-width="3"/>
                        <path d="M25,50 Q50,25 75,50 Q50,75 25,50" fill="var(--accent-color)" opacity="0.3"/>
                        <circle cx="50" cy="50" r="8" fill="var(--accent-color)"/>
                        <path d="M35,35 L65,35 M35,50 L65,50 M35,65 L65,65" stroke="var(--accent-color)" stroke-width="2" opacity="0.6"/>
                    </svg>
                </div>
                <h1>Tensosense Dashboard</h1>
            </div>
            
            <div class="header-right">
                <div class="connection-status">
                    <div id="connectionDot" class="status-dot disconnected"></div>
                    <span id="connectionStatus">Desconectado</span>
                </div>
                <div class="user-info">
                    <span id="username-display"></span>
                    <button id="logoutBtn" class="logout-btn">Cerrar Sesi√≥n</button>
                </div>
            </div>
        </header>

        <!-- Stats Cards -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon">üì±</div>
                <div class="stat-content">
                    <h3>Dispositivos Conectados</h3>
                    <div class="stat-value" id="connectedDevices">0</div>
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon">üìä</div>
                <div class="stat-content">
                    <h3>Datos de Aceleraci√≥n</h3>
                    <div class="stat-value" id="accelerationPoints">0</div>
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon">‚ö°</div>
                <div class="stat-content">
                    <h3>Datos de Tensi√≥n</h3>
                    <div class="stat-value" id="tensionPoints">0</div>
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon">üïí</div>
                <div class="stat-content">
                    <h3>√öltima Actualizaci√≥n</h3>
                    <div class="stat-value" id="lastUpdate">--</div>
                </div>
            </div>
        </div>

        <!-- Charts Section -->
        <div class="charts-grid">
            <div class="chart-container">
                <div class="chart-header">
                    <h3>Aceleraci√≥n en Tiempo Real</h3>
                    <div class="chart-controls">
                        <button class="chart-btn active" data-chart="acceleration" data-action="play">‚ñ∂Ô∏è</button>
                        <button class="chart-btn" data-chart="acceleration" data-action="pause">‚è∏Ô∏è</button>
                        <button class="chart-btn" data-chart="acceleration" data-action="clear">üóëÔ∏è</button>
                    </div>
                </div>
                <canvas id="accelerationChart"></canvas>
            </div>
            
            <div class="chart-container">
                <div class="chart-header">
                    <h3>Tensi√≥n ADC en Tiempo Real</h3>
                    <div class="chart-controls">
                        <button class="chart-btn active" data-chart="tension" data-action="play">‚ñ∂Ô∏è</button>
                        <button class="chart-btn" data-chart="tension" data-action="pause">‚è∏Ô∏è</button>
                        <button class="chart-btn" data-chart="tension" data-action="clear">üóëÔ∏è</button>
                    </div>
                </div>
                <canvas id="tensionChart"></canvas>
            </div>
        </div>

        <!-- Map Section -->
        <div class="map-section">
            <div class="map-header">
                <h3>Ubicaci√≥n de Dispositivos</h3>
                <div class="map-controls">
                    <button class="map-btn" id="centerMap">üéØ Centrar</button>
                    <button class="map-btn" id="toggleMarkers">üìç Marcadores</button>
                </div>
            </div>
            <div id="map" class="map-container"></div>
        </div>

        <!-- Device List -->
        <div class="device-section">
            <div class="section-header">
                <h3>Dispositivos Activos</h3>
                <button class="refresh-btn" id="refreshDevices">üîÑ Actualizar</button>
            </div>
            <div id="deviceList" class="device-list">
                <div class="no-devices">No hay dispositivos conectados</div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>